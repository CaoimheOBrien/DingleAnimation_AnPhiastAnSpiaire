<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu</title>
    <link href="assets/style/stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>
    <!-- Background -->
    <img src="assets/images/homeBackground.png"
         style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: -1;">

    <h1>"An Phiast, An Spiaire"</h1>

    <!-- Menu Buttons -->
    <button id="restart">Play Game</button>   
    <button id="openingScreenBtn">Opening Menu</button>
    <button id="storyInfo">Story Information</button>

    <!-- Sound Effects Toggle (top-left) -->
    <button id="soundEffects" style="position: absolute; top: 10px; left: 10px;">ðŸ”Š Sound Effects: On</button>

    <!-- Music Volume Control -->
    <div id="musicControl">
        <label for="musicSlider">Music Volume:</label>
        <input type="range" id="musicSlider" min="0" max="1" step="0.01" value="0.5">
    </div>

    <!-- Background Music -->
    <audio id="backgroundMusic" src="assets/sounds/theme.mp3" loop></audio>

    <!-- Click Sound -->
    <audio id="clickSound" src="assets/sounds/click.mp3"></audio>

    <script>
        // ===== SOUND VARIABLES =====
        const backgroundMusic = document.getElementById('backgroundMusic');
        const musicSlider = document.getElementById('musicSlider');
        const soundBtn = document.getElementById('soundEffects');
        const clickSound = document.getElementById('clickSound');
        let soundOn = true;

        // ===== FUNCTION: PLAY CLICK SOUND =====
        function playClickSound() {
            if (soundOn) {
                clickSound.currentTime = 0;
                clickSound.play();
            }
        }

        // ===== SOUND EFFECTS TOGGLE =====
        soundBtn.addEventListener('click', () => {
            soundOn = !soundOn;
            soundBtn.textContent = soundOn ? 'ðŸ”Š Sound Effects: On' : 'ðŸ”‡ Sound Effects: Off';
            if (soundOn) playClickSound();
        });

        // ===== MUSIC CONTROL =====
        window.addEventListener('load', () => {
            backgroundMusic.volume = musicSlider.value;

            // Try to autoplay background music
            backgroundMusic.play().catch(() => {
                // If autoplay blocked, wait for first user interaction
                document.body.addEventListener('click', () => {
                    backgroundMusic.play();
                }, { once: true });
            });
        });

        // Slider adjusts music volume live
        musicSlider.addEventListener('input', () => {
            backgroundMusic.volume = musicSlider.value;
        });

        // ====== NAVIGATION BUTTONS (Play Click Sound Before Redirect) ======
        function navigateWithClick(buttonId, targetUrl) {
            const button = document.getElementById(buttonId);
            button.addEventListener('click', (e) => {
                e.preventDefault();
                playClickSound();
                // Wait briefly to let click sound play
                setTimeout(() => {
                    window.location.href = targetUrl;
                }, 200);
            });
        }

        navigateWithClick('restart', 'storyInfo.html');
        navigateWithClick('openingScreenBtn', 'index.html');
        navigateWithClick('storyInfo', 'storyInfo.html');
    </script>
</body>
</html>
